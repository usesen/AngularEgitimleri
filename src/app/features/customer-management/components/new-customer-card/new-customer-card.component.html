<div class="container custom-top-margin">
  <div class="row mb-3 row-spacing">
    <div class="col-md-2">
      <div class="input-group">
        <span class="input-group-text"><i class="bi bi-building"></i></span>
        <input type="text" class="form-control" placeholder="Ünvan" />
      </div>
    </div>
    <div class="col-md-2">
      <div class="input-group">
        <span class="input-group-text"><i class="bi bi-upc"></i></span>
        <input type="text" class="form-control" placeholder="Özel Kod" />
      </div>
    </div>
    <div class="col-md-2">
      <div class="input-group">
        <span class="input-group-text"><i class="bi bi-geo-alt"></i></span>
        <input type="text" class="form-control" placeholder="Şehir" />
      </div>
    </div>
    <div class="col-md-2">
      <button class="btn btn-orange w-100">
        <i class="bi bi-search me-2"></i>Ara
      </button>
    </div>
    <div class="col-md-4">
      <button
        class="btn btn-primary w-100"
        (click)="openNewCustomerModal(newCustomerModal)"
      >
        Yeni Kayıt
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Id</th>
            <th>Ünvan</th>
            <th>Yetkili</th>
            <th>Borç</th>
            <th>Alacak</th>
            <th>Bakiye Borç</th>
            <th>Bakiye Alacak</th>
            <th>İşlemler</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>ABC Şirketi</td>
            <td>Ahmet Yılmaz</td>
            <td>1000</td>
            <td>500</td>
            <td>500</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td>XYZ Limited</td>
            <td>Ayşe Kaya</td>
            <td>1500</td>
            <td>750</td>
            <td>750</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <tr>
            <td>3</td>
            <td>123 Holding</td>
            <td>Mehmet Demir</td>
            <td>2000</td>
            <td>1000</td>
            <td>1000</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <tr>
            <td>4</td>
            <td>Güneş A.Ş.</td>
            <td>Zeynep Yıldız</td>
            <td>800</td>
            <td>400</td>
            <td>400</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <tr>
            <td>5</td>
            <td>Ay Tekstil</td>
            <td>Ali Veli</td>
            <td>1200</td>
            <td>600</td>
            <td>600</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <tr>
            <td>6</td>
            <td>Yıldız Mobilya</td>
            <td>Fatma Şahin</td>
            <td>1800</td>
            <td>900</td>
            <td>900</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <tr>
            <td>7</td>
            <td>Deniz Nakliyat</td>
            <td>Hasan Yılmaz</td>
            <td>2200</td>
            <td>1100</td>
            <td>1100</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <tr>
            <td>8</td>
            <td>Gökkuşağı Market</td>
            <td>Aylin Çelik</td>
            <td>950</td>
            <td>475</td>
            <td>475</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <tr>
            <td>9</td>
            <td>Ege Tarım</td>
            <td>Mustafa Öztürk</td>
            <td>1600</td>
            <td>800</td>
            <td>800</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <tr>
            <td>10</td>
            <td>Karadeniz İnşaat</td>
            <td>Selin Kara</td>
            <td>2500</td>
            <td>1250</td>
            <td>1250</td>
            <td>0</td>
            <td>
              <button class="btn btn-sm btn-primary action-button">
                Düzelt
              </button>
              <button class="btn btn-sm btn-danger action-button">İptal</button>
            </td>
          </tr>
          <!-- Add more static rows as needed -->
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Pagination kısmı aynı kaldı -->
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item disabled">
      <a class="page-link" href="#" tabindex="-1" aria-disabled="true"
        >Önceki</a
      >
    </li>
    <li class="page-item"><a class="page-link" href="#">1</a></li>
    <li class="page-item"><a class="page-link" href="#">2</a></li>
    <li class="page-item"><a class="page-link" href="#">3</a></li>
    <li class="page-item">
      <a class="page-link" href="#">Sonraki</a>
    </li>
  </ul>
</nav>

<!-- Add this modal at the end of the file -->
<ng-template #newCustomerModal let-modal>
  <div class="modal-header bg-light">
    <div class="d-flex justify-content-between align-items-center w-100">
      <h4 class="modal-title" id="modal-basic-title">Yeni Müşteri</h4>
      <button
        type="button"
        class="btn btn-danger rounded-circle d-flex justify-content-center align-items-center"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
        style="width: 30px; height: 30px"
      >
        <i class="bi bi-x-lg text-white"></i>
      </button>
    </div>
  </div>
  <div class="modal-body">
    <form #customerForm="ngForm">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="firstName" class="form-label required">Ad</label>
          <input
            type="text"
            class="form-control"
            id="firstName"
            [(ngModel)]="newCustomer.firstName"
            name="firstName"
            required
            pattern="^[a-zA-ZğüşıöçĞÜŞİÖÇ\s]{2,30}$"
            #firstNameInput="ngModel"
          />
          <div
            *ngIf="
              firstNameInput.invalid &&
              (firstNameInput.dirty || firstNameInput.touched)
            "
            class="text-danger"
          >
            <small *ngIf="firstNameInput.errors?.['pattern']"
              >Geçerli bir ad giriniz (sadece harfler, 2-30 karakter).</small
            >
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="lastName" class="form-label required">Soyad</label>
          <input
            type="text"
            class="form-control"
            id="lastName"
            [(ngModel)]="newCustomer.lastName"
            name="lastName"
            required
            pattern="^[a-zA-ZğüşıöçĞÜŞİÖÇ\s]{2,30}$"
            #lastNameInput="ngModel"
          />
          <div
            *ngIf="
              lastNameInput.invalid &&
              (lastNameInput.dirty || lastNameInput.touched)
            "
            class="text-danger"
          >
            <small *ngIf="lastNameInput.errors?.['pattern']"
              >Geçerli bir soyad giriniz (sadece harfler, 2-30 karakter).</small
            >
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="email" class="form-label required">E-posta</label>
          <input
            type="email"
            class="form-control"
            id="email"
            [(ngModel)]="newCustomer.email"
            name="email"
            required
            pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
            #emailInput="ngModel"
          />
          <div
            *ngIf="
              emailInput.invalid && (emailInput.dirty || emailInput.touched)
            "
            class="text-danger"
          >
            <small *ngIf="emailInput.errors?.['required']"
              >E-posta adresi gereklidir.</small
            >
            <small *ngIf="emailInput.errors?.['pattern']"
              >Geçerli bir e-posta adresi giriniz.</small
            >
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="phone" class="form-label required">Telefon</label>
          <input
            type="tel"
            class="form-control"
            id="phone"
            [(ngModel)]="newCustomer.phone"
            name="phone"
            required
            pattern="^(\+90|0)?\s?5[0-9]{2}\s?[0-9]{3}\s?[0-9]{2}\s?[0-9]{2}$"
            #phoneInput="ngModel"
          />
          <div
            *ngIf="
              phoneInput.invalid && (phoneInput.dirty || phoneInput.touched)
            "
            class="text-danger"
          >
            <small *ngIf="phoneInput.errors?.['required']"
              >Telefon numarası gereklidir.</small
            >
            <small *ngIf="phoneInput.errors?.['pattern']"
              >Geçerli bir telefon numarası giriniz (örn: 05XX XXX XX
              XX).</small
            >
          </div>
        </div>
      </div>
      <div class="mb-3">
        <label for="address" class="form-label">Adres</label>
        <textarea
          class="form-control"
          id="address"
          [(ngModel)]="newCustomer.address"
          name="address"
          rows="2"
          pattern="^[a-zA-Z0-9ğüşıöçĞÜŞİÖÇ\s,./:()-]{5,100}$"
          #addressInput="ngModel"
        ></textarea>
        <div
          *ngIf="
            addressInput.invalid && (addressInput.dirty || addressInput.touched)
          "
          class="text-danger"
        >
          <small *ngIf="addressInput.errors?.['pattern']"
            >Geçerli bir adres giriniz (5-100 karakter, özel karakterler:
            ,./:()-)</small
          >
        </div>
      </div>
      <div class="row">
        <div class="col-md-4 mb-3">
          <label for="city" class="form-label">Şehir</label>
          <input
            type="text"
            class="form-control"
            id="city"
            [(ngModel)]="newCustomer.city"
            name="city"
            pattern="^[a-zA-ZğüşıöçĞÜŞİÖÇ\s]{2,30}$"
            #cityInput="ngModel"
          />
          <div
            *ngIf="cityInput.invalid && (cityInput.dirty || cityInput.touched)"
            class="text-danger"
          >
            <small *ngIf="cityInput.errors?.['pattern']"
              >Geçerli bir şehir adı giriniz (sadece harfler, 2-30
              karakter).</small
            >
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <label for="country" class="form-label">Ülke</label>
          <input
            type="text"
            class="form-control"
            id="country"
            [(ngModel)]="newCustomer.country"
            name="country"
            pattern="^[a-zA-ZğüşıöçĞÜŞİÖÇ\s]{2,30}$"
            #countryInput="ngModel"
          />
          <div
            *ngIf="
              countryInput.invalid &&
              (countryInput.dirty || countryInput.touched)
            "
            class="text-danger"
          >
            <small *ngIf="countryInput.errors?.['pattern']"
              >Geçerli bir ülke adı giriniz (sadece harfler, 2-30
              karakter).</small
            >
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <label for="postalCode" class="form-label">Posta Kodu</label>
          <input
            type="text"
            class="form-control"
            id="postalCode"
            [(ngModel)]="newCustomer.postalCode"
            name="postalCode"
            pattern="^[0-9]{5}$"
            maxlength="5"
            #postalCodeInput="ngModel"
          />
          <div
            *ngIf="
              postalCodeInput.invalid &&
              (postalCodeInput.dirty || postalCodeInput.touched)
            "
            class="text-danger"
          >
            <small *ngIf="postalCodeInput.errors?.['pattern']"
              >Geçerli bir posta kodu giriniz (5 haneli sayı).</small
            >
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="company" class="form-label">Şirket</label>
          <input
            type="text"
            class="form-control"
            id="company"
            [(ngModel)]="newCustomer.company"
            name="company"
            pattern="^[a-zA-Z0-9ğüşıöçĞÜŞİÖÇ\s&.]{2,50}$"
            #companyInput="ngModel"
          />
          <div
            *ngIf="
              companyInput.invalid &&
              (companyInput.dirty || companyInput.touched)
            "
            class="text-danger"
          >
            <small *ngIf="companyInput.errors?.['pattern']"
              >Geçerli bir şirket adı giriniz (2-50 karakter, özel karakterler:
              &.).</small
            >
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="position" class="form-label">Pozisyon</label>
          <input
            type="text"
            class="form-control"
            id="position"
            [(ngModel)]="newCustomer.position"
            name="position"
            pattern="^[a-zA-ZğüşıöçĞÜŞİÖÇ\s]{2,30}$"
            #positionInput="ngModel"
          />
          <div
            *ngIf="
              positionInput.invalid &&
              (positionInput.dirty || positionInput.touched)
            "
            class="text-danger"
          >
            <small *ngIf="positionInput.errors?.['pattern']"
              >Geçerli bir pozisyon giriniz (sadece harfler, 2-30
              karakter).</small
            >
          </div>
        </div>
      </div>
      <div class="mb-3">
        <label for="notes" class="form-label">Notlar</label>
        <textarea
          class="form-control"
          id="notes"
          [(ngModel)]="newCustomer.notes"
          name="notes"
          rows="2"
          pattern="^[a-zA-Z0-9ğüşıöçĞÜŞİÖÇ\s,.!?()-]{0,200}$"
          #notesInput="ngModel"
        ></textarea>
        <div
          *ngIf="notesInput.invalid && (notesInput.dirty || notesInput.touched)"
          class="text-danger"
        >
          <small *ngIf="notesInput.errors?.['pattern']"
            >Geçerli notlar giriniz (0-200 karakter, özel karakterler:
            ,.!?()-)</small
          >
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer bg-light">
    <button
      type="button"
      class="btn btn-outline-secondary me-2"
      (click)="resetForm()"
    >
      Temizle
    </button>
    <button
      type="button"
      class="btn btn-primary"
      (click)="saveCustomer()"
      [disabled]="customerForm.form.invalid"
    >
      Kaydet
    </button>
  </div>
</ng-template>
